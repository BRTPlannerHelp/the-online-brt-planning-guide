{
	"prepare" : {
		"dockerfile" : {
			"type" : "path",
			"data" : ".robrt.Dockerfile"
		}
	},
	"build" : {
		"cmds" : [
			"cd $ROBRT_REPOSITORY_DIR/generator",
			"haxe build.hxml",
			"nodejs bin/tests.js",

			"cd $ROBRT_REPOSITORY_DIR",
			"export DEBUG=1",
			"node --version",
			"time nodejs generator/bin/obrt.js gen guide/the-brt-planning-guide.src",
			"time generator/bin/obrt gen guide/the-brt-planning-guide.src",

			"mkdir -p $ROBRT_OUTPUT_DIR/bin",
			"cp -r generator/docs/design/web/mockup $ROBRT_OUTPUT_DIR/web-mockup",
			"cp -r guide/the-brt-planning-guide.src.html $ROBRT_OUTPUT_DIR/guide",
			"cp generator/docs/design/web/mockup/style.css $ROBRT_OUTPUT_DIR/guide",
			"cp generator/bin/{obrt.n,obrt.js} $ROBRT_OUTPUT_DIR/bin/"
		]
	}
}

